# 인터페이스는 구현하는 쪽을 생각해 설계하라

- 자바 8 전에는 기존 구현체를 깨뜨리지 않고는 인터페이스에 메서드를 추가할 방법이 없었다.
	- `default method`가 없었음으로 인터페이스에 메서드를 추가하면 인터페이스를 구현한 클래스는 모두 새롭게 추가된 메서드를 구현해야한다.
	- 따라서 메서드를 추가하면 보통은 컴파일 오류가 난다.(극한의 우연으로 이미 메서드를 구현해 놨을 경우는 없으니까..)

## 디폴트 메서드가 소개됐지만 위험이 완전히 사라진 것은 아니다

- `default method`는 재정의 하지 않으면 모든 클래스에서 default method가 쓰이게 된다.
- 이처럼 자바에도 기존 인터페이스에 메서드를 추가하는 길이 열렸지만 **모든 기존 구현체들과 매끄럽게 연동되리라는 보장은 없다.**
- 자바 7까지의 세상에서는 모든 클래스가 현재의 인터페이스에 새로운 메서드가 추가될 일은 영원히 없다고 가정하고 작성됐으니 말이다.
- default method는 구현 클래스에 대해 아무것도 모른 채 합의 없이 무작정 삽입될 뿐이다.

## 디폴트 메서드는 (컴파일에 성공하더라도) 기존 구현체에 런타임 오류를 일으킬 수 있다.

- 흔한 일은 아니지만, 나에게 일어나지 않으리라는 보장도 없다.
- 자바 8에서는 컬렉션 인터페이스에 꽤 많은 default method를 추가했고, 그 결과 기존에 짜여진 많은 자바 코드가 영향을 받은 것으로 알려졌다.
- **기존 인터페이스에 default method로 새 메서드를 추가하는 일은 꼭 필요한 경우가 아니라면 피해야 한다.**
	- 추가하려는 default method가 기존 구현체들과 충돌하지 않을지 심사숙고함은 당연하다.
- **반면 새로운 인터페이스를 만드는 경우라면 표준적인 메서드 구현을 제공하는 데 아주 유용한 수단이다.**
	- 그 인터페이스를 더 쉽게 구현해 활용할 수 있게 해주기 때문이다.
- default method는 인터페이스로부터 메서드를 제거하거나 기존 메서드의 시그니처를 수정하는 용도가 아님을 명심해야한다.
	- 이런 형태로 인터페이스를 변경하면 반드시 기존 클라이언트를 망가뜨리게 된다.

## 새로운 인터페이스라면 릴리스 전에 반드시 테스트를 거쳐야 한다.

- 수많은 개발자가 그 인터페이스를 나름의 방식으로 구현할 것이다.
	- 따라서 우리도 서로 다른 방식으로 최소한 세 가지는 구현해봐야한다.
	- 또한 각 인터페이스의 인스턴스를 다양한 작업에 활용하는 클라이언트도 여러 개 만들어봐야 한다.
- **인터페이스를 릴리스한 후라도 결함을 수정하는 게 가능한 경우도 있겠지만, 절대 그 가능성에 기대서는 안된다.**